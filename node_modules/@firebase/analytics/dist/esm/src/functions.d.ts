/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
<<<<<<< HEAD
import { AnalyticsCallOptions, CustomParams, EventParams, ConsentSettings } from './public-types';
import { Gtag } from './types';
/**
 * Event parameters to set on 'gtag' during initialization.
 */
export declare let defaultEventParametersForInit: CustomParams | undefined;
=======

import { AnalyticsCallOptions, CustomParams, EventParams, ConsentSettings } from './public-types';
import { Gtag } from './types';

/**
 * Event parameters to set on 'gtag' during initialization.
 */
let defaultEventParametersForInit: CustomParams | undefined;

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Logs an analytics event through the Firebase SDK.
 *
 * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event
 * @param eventName Google Analytics event name, choose from standard list or use a custom string.
 * @param eventParams Analytics event parameters.
 */
<<<<<<< HEAD
export declare function logEvent(gtagFunction: Gtag, initializationPromise: Promise<string>, eventName: string, eventParams?: EventParams, options?: AnalyticsCallOptions): Promise<void>;
=======
export async function logEvent(gtagFunction: Gtag, initializationPromise: Promise<string>, eventName: string, eventParams?: EventParams, options?: AnalyticsCallOptions): Promise<void> {
  await initializationPromise;
  gtagFunction('event', eventName, eventParams, options);
}

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Set screen_name parameter for this Google Analytics ID.
 *
 * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.
 * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.
 *
 * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event
 * @param screenName Screen name string to set.
 */
<<<<<<< HEAD
export declare function setCurrentScreen(gtagFunction: Gtag, initializationPromise: Promise<string>, screenName: string | null, options?: AnalyticsCallOptions): Promise<void>;
=======
export async function setCurrentScreen(gtagFunction: Gtag, initializationPromise: Promise<string>, screenName: string | null, options?: AnalyticsCallOptions): Promise<void> {
  await initializationPromise;
  gtagFunction('config', undefined, { screen_name: screenName });
}

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Set user_id parameter for this Google Analytics ID.
 *
 * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event
 * @param id User ID string to set
 */
<<<<<<< HEAD
export declare function setUserId(gtagFunction: Gtag, initializationPromise: Promise<string>, id: string | null, options?: AnalyticsCallOptions): Promise<void>;
=======
export async function setUserId(gtagFunction: Gtag, initializationPromise: Promise<string>, id: string | null, options?: AnalyticsCallOptions): Promise<void> {
  await initializationPromise;
  gtagFunction('config', undefined, { user_id: id });
}

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Set all other user properties other than user_id and screen_name.
 *
 * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event
 * @param properties Map of user properties to set
 */
<<<<<<< HEAD
export declare function setUserProperties(gtagFunction: Gtag, initializationPromise: Promise<string>, properties: CustomParams, options?: AnalyticsCallOptions): Promise<void>;
=======
export async function setUserProperties(gtagFunction: Gtag, initializationPromise: Promise<string>, properties: CustomParams, options?: AnalyticsCallOptions): Promise<void> {
  await initializationPromise;
  gtagFunction('set', properties);
}

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Retrieves a unique Google Analytics identifier for the web client.
 * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.
 *
 * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event
 */
<<<<<<< HEAD
export declare function internalGetGoogleAnalyticsClientId(gtagFunction: Gtag, initializationPromise: Promise<string>): Promise<string>;
=======
export async function internalGetGoogleAnalyticsClientId(gtagFunction: Gtag, initializationPromise: Promise<string>): Promise<string> {
  await initializationPromise;
  return new Promise<string>((resolve) => {
    gtagFunction('get', { 'event_name': 'gtag.js_client_id' }, (data) => {
      resolve(data.client_id as string);
    });
  });
}

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Set whether collection is enabled for this ID.
 *
 * @param enabled If true, collection is enabled for this ID.
 */
<<<<<<< HEAD
export declare function setAnalyticsCollectionEnabled(initializationPromise: Promise<string>, enabled: boolean): Promise<void>;
/**
 * Consent parameters to default to during 'gtag' initialization.
 */
export declare let defaultConsentSettingsForInit: ConsentSettings | undefined;
=======
export async function setAnalyticsCollectionEnabled(initializationPromise: Promise<string>, enabled: boolean): Promise<void> {
  const gtagFunction = (await initializationPromise) as Gtag;
  gtagFunction('set', { 'allow_ad_personalization_signals': enabled });
}

/**
 * Consent parameters to default to during 'gtag' initialization.
 */
let defaultConsentSettingsForInit: ConsentSettings | undefined;

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Sets the variable {@link defaultConsentSettingsForInit} for use in the initialization of
 * analytics.
 *
 * @param consentSettings Maps the applicable end user consent state for gtag.js.
 */
<<<<<<< HEAD
export declare function _setConsentDefaultForInit(consentSettings?: ConsentSettings): void;
=======
export function _setConsentDefaultForInit(consentSettings?: ConsentSettings): void {
  defaultConsentSettingsForInit = consentSettings;
}

>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
/**
 * Sets the variable `defaultEventParametersForInit` for use in the initialization of
 * analytics.
 *
 * @param customParams Any custom params the user may pass to gtag.js.
 */
<<<<<<< HEAD
export declare function _setDefaultEventParametersForInit(customParams?: CustomParams): void;
=======
export function _setDefaultEventParametersForInit(customParams?: CustomParams): void {
  defaultEventParametersForInit = customParams;
}
>>>>>>> 92dec27fdf3ebcb1f8ae0a00c18d5f3e95d36a79
